(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{2936:(e,o,i)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return i(9287)}])},9287:(e,o,i)=>{"use strict";i.r(o),i.d(o,{default:()=>m});var r=i(7876),t=i(4250),a=i.n(t),l=i(8847),s=i.n(l),n=i(4232),d=i(2067),x=i.n(d),b=i(3779),c=i(7461),p=i(3176);i(1906);let f=s()(()=>Promise.all([i.e(805),i.e(772)]).then(i.bind(i,7772)),{loadableGenerated:{webpack:()=>[7772]},ssr:!1});function m(){let[e,o]=(0,n.useState)([]),[i,t]=(0,n.useState)(null),[l,s]=(0,n.useState)(""),[d,m]=(0,n.useState)("8001"),[u,g]=(0,n.useState)(""),[k,w]=(0,n.useState)(""),[h,y]=(0,n.useState)("stopped"),[z,v]=(0,n.useState)(null);(0,n.useEffect)(()=>{let e;return"running"===h&&((e=new WebSocket("ws://localhost:".concat(k,"/ws"))).onmessage=e=>{try{let i=JSON.parse(e.data);o(e=>[...e.filter(e=>e.soldier_id!==i.soldier_id),{...i,lastUpdate:new Date().toISOString()}])}catch(e){console.error("Error parsing soldier data:",e),v("Error receiving data from WebSocket")}},e.onerror=()=>{v("WebSocket connection failed")},e.onclose=()=>{"running"===h&&v("WebSocket closed unexpectedly")}),()=>e&&e.close()},[h,k]);let j=async()=>{if("stopped"===h){if(!u||!k)return void v("Please save valid ports first");try{let e=await fetch("/api/session-control",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"start",port:u,ws_port:k})}),o=await e.json();o.success?(y("running"),v(null)):v(o.error||"Failed to start session")}catch(e){v("Error starting session: "+e.message)}}else try{let e=await fetch("/api/session-control",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"stop"})}),o=await e.json();o.success?(y("stopped"),v(null)):v(o.error||"Failed to stop session")}catch(e){v("Error stopping session: "+e.message)}};return(0,r.jsxs)("div",{className:"jsx-9de421a33172ef0 "+(x().simulationPage||""),children:[(0,r.jsx)("a",{href:"/",className:"jsx-9de421a33172ef0 "+(x().endSessionButton||""),children:"End Session"}),(0,r.jsxs)("div",{className:"jsx-9de421a33172ef0 "+(x().container||""),children:[(0,r.jsx)("div",{className:"jsx-9de421a33172ef0 "+(x().leftContainer||""),children:(0,r.jsx)(b.A,{soldiers:e,selectedSoldierId:i,onSelectSoldier:e=>{t(o=>o===e?null:e)}})}),(0,r.jsxs)("div",{className:"jsx-9de421a33172ef0 "+(x().rightContainer||""),children:[(0,r.jsx)("div",{className:"jsx-9de421a33172ef0 "+(x().mapContainer||""),children:(0,r.jsx)(f,{soldiers:e,selectedSoldierId:i})}),(0,r.jsxs)("div",{className:"jsx-9de421a33172ef0 "+(x().bottomSection||""),children:[(0,r.jsx)("div",{className:"jsx-9de421a33172ef0 "+(x().killFeed||""),children:(0,r.jsx)(c.A,{})}),(0,r.jsx)("div",{className:"jsx-9de421a33172ef0 "+(x().statsTable||""),children:(0,r.jsx)(p.A,{})})]}),(0,r.jsxs)("div",{className:"jsx-9de421a33172ef0 "+(x().sessionControls||""),children:["stopped"===h&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{type:"text",placeholder:"Enter COM Port (e.g., COM3)",value:l,onChange:e=>s(e.target.value.toUpperCase()),className:"jsx-9de421a33172ef0 "+(x().comPortInput||"")}),(0,r.jsx)("input",{type:"text",placeholder:"Enter WS Port (e.g., 8001)",value:d,onChange:e=>m(e.target.value),className:"jsx-9de421a33172ef0 "+(x().comPortInput||"")}),(0,r.jsx)("button",{onClick:()=>{if(!l||!l.match(/^COM\d+$/i))return void v("Please enter a valid COM port (e.g., COM3)");let e=parseInt(d);if(!d||isNaN(e)||e<1024||e>65535)return void v("Please enter a valid WebSocket port (1024-65535)");g(l.toUpperCase()),w(d),v(null)},className:"jsx-9de421a33172ef0 "+(x().comPortButton||""),children:"Save Ports"})]}),(0,r.jsx)("button",{onClick:j,disabled:"stopped"===h&&(!u||!k),className:"jsx-9de421a33172ef0 "+(x().sessionButton||""),children:"running"===h?"Stop Simulation":"Start Simulation"}),z&&(0,r.jsx)("p",{className:"jsx-9de421a33172ef0 "+(x().error||""),children:z}),u&&k&&(0,r.jsx)("p",{className:"jsx-9de421a33172ef0 "+(x().status||"")})]})]})]}),(0,r.jsx)(a(),{id:"9de421a33172ef0",children:'.simulationPage{width:100vw;height:100vh;background-color:#0b0c10;color:#66fcf1;font-family:"Exo 2",sans-serif;margin:0;padding:0;overflow:hidden}.sidebar{width:250px;background:#f4f4f4;padding:1rem;height:100vh;overflow-y:auto;border-right:2px solid#ddd}.simulationPage{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;height:100vh}.container{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1}.leftContainer{width:250px;border-right:1px solid#ccc}.rightContainer{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;position:relative}.mapContainer{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;height:60%}.bottomSection{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;height:40%}.killFeed{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;border-right:1px solid#ccc}.statsTable{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1}.endSessionButton{position:absolute;bottom:10px;right:10px;padding:8px 16px;background-color:#ff4d4d;color:white;text-decoration:none;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}.sessionControls{position:absolute;bottom:10px;right:10px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:8px;-webkit-box-align:end;-webkit-align-items:flex-end;-moz-box-align:end;-ms-flex-align:end;align-items:flex-end;background-color:rgba(255,255,255,.9);padding:10px;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;-webkit-box-shadow:0 2px 4px rgba(0,0,0,.1);-moz-box-shadow:0 2px 4px rgba(0,0,0,.1);box-shadow:0 2px 4px rgba(0,0,0,.1)}.comPortInput{padding:6px;border:1px solid#ccc;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;width:150px}.comPortButton,.sessionButton{padding:6px 12px;border:none;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;cursor:pointer;background-color:#007bff;color:white}.comPortButton:disabled,.sessionButton:disabled{background-color:#ccc;cursor:not-allowed}.error{color:red;font-size:12px;margin:0}.status{font-size:12px;color:#333;margin:0}.team-group h4{margin-bottom:.5rem;border-bottom:1px solid#ccc}.soldier-item{padding:5px;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.soldier-item:hover{background:#e6f7ff}.dot{height:10px;width:10px;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;margin-right:8px}.green{background-color:green}.red{background-color:red}.endSessionButton{position:absolute;top:1rem;right:1rem;z-index:999;padding:.7rem 1.2rem;background-color:#f44;color:#fff;font-weight:bold;text-decoration:none;border:2px solid#f44;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;-webkit-transition:background-color.2s,color.2s,border-color.2s;-moz-transition:background-color.2s,color.2s,border-color.2s;-o-transition:background-color.2s,color.2s,border-color.2s;transition:background-color.2s,color.2s,border-color.2s}.loadingContainer,.errorContainer{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;height:100vh;color:#0ff}.retryButton,.refreshButton{background:#0ff;color:#0a0a0a;border:none;padding:.5rem 1rem;cursor:pointer;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;font-family:"Orbitron",sans-serif;margin:1rem}.retryButton:hover,.refreshButton:hover{background:#3ff}.endSessionButton:hover{background-color:#f66;border-color:#f66;cursor:pointer}.container{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;height:-webkit-calc(100vh - 40px);height:-moz-calc(100vh - 40px);height:calc(100vh - 40px);padding:20px;gap:20px}.leftContainer{-webkit-box-flex:0;-webkit-flex:0 0 200px;-moz-box-flex:0;-ms-flex:0 0 200px;flex:0 0 200px;background-color:#1f2833;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;-webkit-box-shadow:0 0 10px rgba(102,252,241,.5);-moz-box-shadow:0 0 10px rgba(102,252,241,.5);box-shadow:0 0 10px rgba(102,252,241,.5);overflow-y:auto;padding:20px}.rightContainer{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:20px}.mapContainer{-webkit-box-flex:2;-webkit-flex:2;-moz-box-flex:2;-ms-flex:2;flex:2;position:relative;background-color:#1f2833;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;overflow:hidden;height:-webkit-calc(70vh - 60px);height:-moz-calc(70vh - 60px);height:calc(70vh - 60px)}.mapContainer #map{width:100%;height:100%}.bottomSection{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:20px;min-height:200px;max-height:-webkit-calc(30vh - 40px);max-height:-moz-calc(30vh - 40px);max-height:calc(30vh - 40px)}.killFeed,.statsTable{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;background-color:#1f2833;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;padding:15px;overflow-y:auto}.statsTableWrapper{background-color:#1e272e;border:2px solid#ffa502;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;padding:20px;height:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.statsTitle{text-align:center;font-size:22px;font-weight:bold;margin:0 0 20px;color:#ffa502}#statsTable{width:100%;border-collapse:collapse;text-align:center;font-family:"Exo 2",sans-serif;background-color:#2f3640;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;overflow:hidden}#statsTable th,#statsTable td{padding:12px 15px;border:1px solid#ffa502;text-align:center}#statsTable th{background-color:#ffa502;color:#1e272e;font-weight:bold;position:-webkit-sticky;position:sticky;top:0;z-index:1}#statsTable td{background-color:#353b48;color:#dcdde1}#statsTable tr:hover td{background-color:#57606f;-webkit-transition:background-color.2s ease;-moz-transition:background-color.2s ease;-o-transition:background-color.2s ease;transition:background-color.2s ease}.teamName{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:10px}.teamIndicator{width:12px;height:12px;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;display:inline-block}.teamIndicator.red{background-color:#e84118}.teamIndicator.blue{background-color:#00a8ff}.tableContainer::-webkit-scrollbar{width:8px}.tableContainer::-webkit-scrollbar-thumb{background:#ffa502;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}.tableContainer::-webkit-scrollbar-thumb:hover{background:#ffbe76}'})]})}}},e=>{var o=o=>e(e.s=o);e.O(0,[206,302,636,593,792],()=>o(2936)),_N_E=e.O()}]);