"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[772],{7772:(e,a,r)=>{r.r(a),r.d(a,{default:()=>c});var t=r(7876),o=r(4250),n=r.n(o),i=r(4232),s=r(6895),l=r.n(s);function c(e){let{soldiers:a=[],selectedSoldierId:r}=e,o=(0,i.useRef)(null),s=(0,i.useRef)({}),c=(0,i.useRef)({}),d=(0,i.useRef)({}),b=(0,i.useRef)({}),g=(0,i.useRef)({}),f=(0,i.useRef)(!1),p=(0,i.useRef)(null),u=(0,i.useRef)(null),[m,x]=(0,i.useState)({}),[h,A]=(0,i.useState)({}),[y,w]=(0,i.useState)(""),[k,C]=(0,i.useState)(0),[F,_]=(0,i.useState)(null),[z,E]=(0,i.useState)(!1),[j,v]=(0,i.useState)(15),[N,M]=(0,i.useState)(!0),[O,S]=(0,i.useState)(null),[D,L]=(0,i.useState)({}),[T,B]=(0,i.useState)(!1),[R,U]=(0,i.useState)(!0),I=["#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF","#FFA500","#800080","#FFFFFF","#000000"];function P(e){if(!e||"string"!=typeof e)return console.warn("Invalid soldier_id, using default color"),I[0];let a=0;for(let r=0;r<e.length;r++)a=(a<<5)-a+e.charCodeAt(r),a&=a;let r=Math.abs(a)%I.length;return I[r]}function Y(e,a,r,t){let o=e*Math.PI/180,n=r*Math.PI/180,i=(r-e)*Math.PI/180,s=(t-a)*Math.PI/180,l=Math.sin(i/2)*Math.sin(i/2)+Math.cos(o)*Math.cos(n)*Math.sin(s/2)*Math.sin(s/2);return 2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))*6371e3}return(0,i.useEffect)(()=>{console.log("Soldiers prop:",a)},[a]),(0,i.useEffect)(()=>{let e=()=>{B(!!document.fullscreenElement),setTimeout(()=>{o.current&&o.current.invalidateSize()},100)};return document.addEventListener("fullscreenchange",e),()=>{document.removeEventListener("fullscreenchange",e)}},[]),(0,i.useEffect)(()=>{let e=setTimeout(()=>{let e=document.getElementById("mapid");if(!e){console.error("Map container not found"),w("Error: Map container not found");return}if(f.current||o.current||e._leaflet_id||e.hasChildNodes())return;u.current=e;let a="leaflet-css";if(!document.getElementById(a)){let e=document.createElement("link");e.id=a,e.rel="stylesheet",e.href="/leaflet.css",document.head.appendChild(e)}w("Initializing map…");try{o.current=l().map(e,{center:[28.5471399,77.1945754],zoom:15,minZoom:10,maxZoom:21,preferCanvas:!0,zoomControl:!0,attributionControl:!1});class a extends l().TileLayer{createTile(e,a){let r=document.createElement("img");if(!this._db)return console.warn("Database not loaded yet"),r.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=",setTimeout(()=>a(null,r),100),r;let t=e.z,o=e.x,n=Math.pow(2,t)-e.y-1;try{let e=this._db.prepare("SELECT tile_data FROM tiles WHERE zoom_level=? AND tile_column=? AND tile_row=?");if(e.bind([t,o,n]),e.step()){let i=e.getAsObject().tile_data;if(i&&i.length>0){let e=new Blob([new Uint8Array(i)],{type:"image/png"}),s=URL.createObjectURL(e);r.onload=()=>{URL.revokeObjectURL(s),a(null,r)},r.onerror=()=>{URL.revokeObjectURL(s),console.warn("Tile error for ".concat(t,"/").concat(o,"/").concat(n)),r.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=",a(null,r)},r.src=s}else console.warn("Empty tile data for ".concat(t,"/").concat(o,"/").concat(n)),r.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=",a(null,r)}else t<=12&&console.warn("Missing tile at zoom ".concat(t,": ").concat(o,"/").concat(n," (critical for zoom out)")),r.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=",a(null,r);e.free()}catch(e){console.error("Error getting tile ".concat(t,"/").concat(o,"/").concat(n,":"),e),r.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=",a(null,r)}return r}constructor(...e){super(...e),this._db=null,this.loadMBTilesFromArrayBuffer=e=>{try{console.log("Loading MBTiles from buffer, size:",e.byteLength),this._db=new window.SQL.Database(new Uint8Array(e)),this._getMetadata(),w(""),C(100),E(!0),M(!1),this.redraw(),console.log("MBTiles loaded successfully")}catch(e){console.error("Error loading MBTiles:",e),w("Error loading MBTiles: ".concat(e.message)),C(0)}},this._getMetadata=()=>{if(this._db)try{let e=this._db.prepare("SELECT name, value FROM metadata"),a={};for(;e.step();){let r=e.getAsObject();a[r.name]=r.value}if(e.free(),console.log("MBTiles metadata:",a),a.bounds){let e=function(e){if(!e)return null;let a=e.split(",").map(Number);return 4===a.length?{west:a[0],south:a[1],east:a[2],north:a[3]}:null}(a.bounds);S(e),console.log("Map metadata bounds:",e)}let r=this._db.prepare("SELECT DISTINCT zoom_level FROM tiles ORDER BY zoom_level"),t=[];for(;r.step();)t.push(r.getAsObject().zoom_level);r.free(),console.log("Available zoom levels:",t);let n=Math.min(...t),i=Math.max(...t);if(console.log("Adjusting zoom range: ".concat(n," - ").concat(i)),this.options.minZoom=n,this.options.maxZoom=Math.min(i,21),o.current&&(o.current.setMinZoom(n),o.current.setMaxZoom(Math.min(i,21))),a.bounds){let e=a.bounds.split(",").map(Number);if(4===e.length){let a=[e[1],e[0]],r=[e[3],e[2]],t=l().latLngBounds(a,r);_(t);let s=o.current.getBoundsZoom(t),c=Math.max(n,Math.min(s,i-1));v(c),setTimeout(()=>{o.current&&o.current.fitBounds(t,{maxZoom:c,padding:[10,10]})},100)}}let s=this._db.prepare("SELECT COUNT(*) as count FROM tiles");s.step();let c=s.getAsObject().count;s.free(),console.log("Total tiles:",c);let d=this._db.prepare("SELECT zoom_level, COUNT(*) as count FROM tiles GROUP BY zoom_level ORDER BY zoom_level");for(console.log("Tile distribution:");d.step();){let e=d.getAsObject();console.log("  Zoom ".concat(e.zoom_level,": ").concat(e.count," tiles"))}d.free()}catch(e){console.error("Error reading metadata:",e)}},this.loadMBTilesFromPath=e=>{w("Loading ".concat(e,"…")),E(!1),C(0),console.log("Loading MBTiles from path:",e),fetch(e,{method:"GET"}).then(async e=>{if(!e.ok)throw Error("HTTP ".concat(e.status,": ").concat(e.statusText));let a=e.headers.get("Content-Length"),r=a?parseInt(a,10):0,t=0,o=e.body.getReader(),n=[];for(;;){let{done:e,value:a}=await o.read();if(e)break;if(n.push(a),t+=a.length,r>0){let e=Math.round(t/r*100);C(e),w("Loading map: ".concat(e,"%"))}else w("Loading map: ".concat(Math.round(t/1048576)," MB processed"))}let i=new Uint8Array(t),s=0;for(let e of n)i.set(e,s),s+=e.length;console.log("MBTiles file fetched successfully"),this.loadMBTilesFromArrayBuffer(i.buffer)}).catch(e=>{console.error("Error loading MBTiles:",e),w("Error: ".concat(e.message)),C(0),E(!1)})}}}p.current=new a({minZoom:1,maxZoom:21,tms:!0,errorTileUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=",bounds:null,noWrap:!1,keepBuffer:2,updateWhenIdle:!1,updateWhenZooming:!0}),p.current.addTo(o.current),w("Please load Map file"),f.current=!0;let r=document.createElement("script");r.src="/sqljs/sql-wasm.js",r.onload=()=>{window.initSqlJs({locateFile:()=>"/sqljs/sql-wasm.wasm"}).then(e=>{window.SQL=e}).catch(e=>{console.error("SQL.js initialization failed:",e),w("SQL.js Error: ".concat(e.message))})},r.onerror=()=>{console.error("Failed to load SQL.js script"),w("Error: Failed to load SQL.js")},document.body.appendChild(r)}catch(e){console.error("Error creating map:",e),w("Map Error: ".concat(e.message))}},0);return()=>{if(clearTimeout(e),o.current){try{o.current.remove()}catch(e){console.warn("Error removing map:",e)}o.current=null}u.current&&u.current._leaflet_id&&delete u.current._leaflet_id,s.current={},c.current={},d.current={},b.current={},g.current={},p.current=null,f.current=!1,u.current=null,E(!1),C(0)}},[]),(0,i.useEffect)(()=>{A(e=>{let r={...e},t=!1;return a.forEach(e=>{e&&e.soldier_id&&"string"==typeof e.soldier_id?r[e.soldier_id]||(r[e.soldier_id]=P(e.soldier_id),t=!0):console.warn("Skipping soldier with invalid soldier_id:",e)}),t?r:e})},[a]),(0,i.useEffect)(()=>{f.current&&x(e=>{let r={...e},t=!1;return a.forEach(e=>{if(e&&e.soldier_id&&"string"==typeof e.soldier_id&&e.gps&&"number"==typeof e.gps.latitude&&"number"==typeof e.gps.longitude){let{soldier_id:a,gps:o}=e;r[a]||(r[a]=[]);let n=r[a][r[a].length-1],i=[o.latitude,o.longitude];n&&n[0]===i[0]&&n[1]===i[1]||(r[a]=[...r[a],i],t=!0)}else console.warn("Skipping invalid soldier for trails:",e)}),t?r:e})},[a]),(0,i.useEffect)(()=>{if(!O)return void L({});let e={};a.forEach(a=>{if(a&&a.soldier_id&&"string"==typeof a.soldier_id&&a.gps&&"number"==typeof a.gps.latitude&&"number"==typeof a.gps.longitude){var r,t;let{soldier_id:o,gps:n}=a;r=n.latitude,t=n.longitude,!O||r>=O.south&&r<=O.north&&t>=O.west&&t<=O.east||(e[o]={originalLat:n.latitude,originalLng:n.longitude,soldier:a},console.log("Soldier ".concat(o," is out of bounds:"),n))}}),L(e)},[a,O]),(0,i.useEffect)(()=>{f.current&&o.current&&(Object.values(c.current).forEach(e=>{o.current.removeLayer(e)}),c.current={},Object.entries(D).forEach(e=>{var a;let[r,t]=e,{soldier:n}=t,i=h[r]||P(r),s=n.hit_status?"#ff4444":i,d=(null==(a=n.imu)?void 0:a.yaw)||0,b='\n        <svg width="30" height="30">\n          <circle cx="15" cy="15" r="12" fill="'.concat(s,'" opacity="0.8" \n                  stroke="#ff0000" stroke-width="3" stroke-dasharray="2,2">\n            <animate attributeName="opacity" values="0.3;1;0.3" dur="1s" repeatCount="indefinite"/>\n          </circle>\n          <circle cx="15" cy="15" r="8" fill="').concat(s,'" opacity="0.9"/>\n          <line x1="15" y1="15" x2="15" y2="3"\n                stroke="#000" stroke-width="2"\n                transform="rotate(').concat(d,',15,15)"/>\n          <text x="15" y="25" text-anchor="middle" fill="#ff0000" font-size="8" font-weight="bold">OUT</text>\n        </svg>'),g=o.current.getCenter(),f=l().divIcon({className:"out-of-bounds-marker",html:b,iconSize:[30,30],iconAnchor:[15,15]}),p=l().marker([g.lat,g.lng],{icon:f});p.bindPopup("<b>".concat(r," - OUT OF BOUNDS</b><br/>\n         Original Lat: ").concat(t.originalLat,"<br/>\n         Original Lng: ").concat(t.originalLng,"<br/>\n         Color: ").concat(i,'<br/>\n         <span style="color: #ff0000; font-weight: bold;">Location outside map area!</span>')),p.addTo(o.current),c.current[r]=p}),a.forEach(e=>{if(!e||!e.soldier_id||"string"!=typeof e.soldier_id||!e.gps||"number"!=typeof e.gps.latitude||"number"!=typeof e.gps.longitude)return void console.warn("Skipping invalid soldier for markers:",e);let{soldier_id:a,gps:r,hit_status:t,imu:n}=e;if(D[a]){s.current[a]&&(o.current.removeLayer(s.current[a]),delete s.current[a]);return}let i=h[a]||P(a),c=t?"#ff4444":i,d=(null==n?void 0:n.yaw)||0,b='\n        <svg width="20" height="20">\n          <circle cx="10" cy="10" r="8" fill="'.concat(c,'" opacity="0.8"/>\n          <line x1="10" y1="10" x2="10" y2="0"\n                stroke="#000" stroke-width="2"\n                transform="rotate(').concat(d,',10,10)"/>\n        </svg>');if(s.current[a]){let e=s.current[a];e.setLatLng([r.latitude,r.longitude]);let t=l().divIcon({className:"custom-marker",html:b,iconSize:[20,20],iconAnchor:[10,10]});e.setIcon(t),e.setPopupContent("<b>".concat(a,"</b><br/>Lat: ").concat(r.latitude,"<br/>Lng: ").concat(r.longitude,"<br/>Color: ").concat(i))}else{let e=l().divIcon({className:"custom-marker",html:b,iconSize:[20,20],iconAnchor:[10,10]}),t=l().marker([r.latitude,r.longitude],{icon:e});t.bindPopup("<b>".concat(a,"</b><br/>Lat: ").concat(r.latitude,"<br/>Lng: ").concat(r.longitude,"<br/>Color: ").concat(i)),t.addTo(o.current),s.current[a]=t}}))},[a,h,D]),(0,i.useEffect)(()=>{if(!f.current||!o.current)return;let e=o.current;if(Object.values(g.current).forEach(a=>{e.removeLayer(a)}),g.current={},Object.values(d.current).forEach(a=>{e.removeLayer(a)}),Object.values(b.current).forEach(a=>{e.removeLayer(a)}),d.current={},b.current={},R){let t=a.find(e=>e&&"1"===e.soldier_id&&e.gps&&"number"==typeof e.gps.latitude&&"number"==typeof e.gps.longitude);if(t){let r=[t.gps.latitude,t.gps.longitude];a.forEach(a=>{if(a&&a.soldier_id&&"string"==typeof a.soldier_id&&"1"!==a.soldier_id&&a.gps&&"number"==typeof a.gps.latitude&&"number"==typeof a.gps.longitude){let t,{soldier_id:o,gps:n}=a;if(D[o])return;let i=[n.latitude,n.longitude],s=Y(r[0],r[1],i[0],i[1]),c=h[o]||P(o),g=l().polyline([r,i],{color:c,weight:2,opacity:.5,dashArray:"2,4"});g.addTo(e),d.current[o]=g;let f=(r[0]+i[0])/2,p=(r[1]+i[1])/2;t=s<1e3?"".concat(Math.round(s)," m"):"".concat((s/1e3).toFixed(2)," km");let u=l().divIcon({className:"distance-label",html:"\n                <div style=\"\n                  background: rgba(0, 20, 40, 0.8);\n                  color: #66fcf1;\n                  font-family: 'Courier New', monospace;\n                  font-size: 12px;\n                  font-weight: bold;\n                  padding: 8px 18px;\n                  border: 1px solid #00ffff;\n                  border-radius: 4px;\n                  white-space: nowrap;\n                  text-align: center;\n                  min-width: 60px;\n                \">\n                  ".concat(t,"\n                </div>\n              "),iconSize:[60,24],iconAnchor:[30,12]}),m=l().marker([f,p],{icon:u});m.addTo(e),b.current[o]=m}else console.warn("Skipping invalid soldier for distance lines:",a)})}if(r){let a=m[r]||[];if(a.length>1&&!D[r]){let t=h[r]||P(r),o=l().polyline(a,{color:t,weight:3,opacity:1,dashArray:"4,2"});o.addTo(e),g.current[r]=o}}else Object.entries(m).forEach(a=>{let[r,t]=a;if(t.length<2||D[r])return;let o=h[r]||P(r),n=l().polyline(t,{color:o,weight:2,opacity:1,dashArray:"4,6"});n.addTo(e),g.current[r]=n});if(Object.values(s.current).forEach(e=>e.setOpacity(1)),Object.values(c.current).forEach(e=>e.setOpacity(1)),r){Object.entries(s.current).forEach(e=>{let[a,t]=e;return t.setOpacity(a===r?1:.3)}),Object.entries(c.current).forEach(e=>{let[a,t]=e;return t.setOpacity(a===r?1:.3)});let a=s.current[r]||c.current[r];a&&e.setView(a.getLatLng(),e.getZoom())}}else console.log("Path tracking disabled, clearing all trails and distance lines"),e.eachLayer(a=>{a instanceof l().Polyline&&(console.log("Removing polyline layer:",a),e.removeLayer(a))}),Object.values(s.current).forEach(e=>e.setOpacity(1)),Object.values(c.current).forEach(e=>e.setOpacity(1))},[a,m,r,h,D,R]),(0,t.jsxs)("div",{style:{position:"relative",height:"100%",width:"100%"},className:n().dynamic([["82e4888967881265",[R?"#4CAF50":"#f44336",R?"#2E7D32":"#c62828",R?"rgba(76, 175, 80, 0.3)":"rgba(244, 67, 54, 0.3)",R?"rgba(76, 175, 80, 0.5)":"rgba(244, 67, 54, 0.5)",R?"#4CAF50":"#f44336",R?"#4CAF50":"#f44336",R?"rgba(76, 175, 80, 0.2)":"rgba(244, 67, 54, 0.2)"]]])+" map-container",children:[(0,t.jsx)(n(),{id:"82e4888967881265",dynamic:[R?"#4CAF50":"#f44336",R?"#2E7D32":"#c62828",R?"rgba(76, 175, 80, 0.3)":"rgba(244, 67, 54, 0.3)",R?"rgba(76, 175, 80, 0.5)":"rgba(244, 67, 54, 0.5)",R?"#4CAF50":"#f44336",R?"#4CAF50":"#f44336",R?"rgba(76, 175, 80, 0.2)":"rgba(244, 67, 54, 0.2)"],children:'.scifi-panel.__jsx-style-dynamic-selector{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-moz-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);-o-transform:translate(-50%,-50%);transform:translate(-50%,-50%);z-index:1000;background:-webkit-linear-gradient(315deg,rgba(0,20,40,.95)0%,rgba(0,40,80,.95)100%);background:-moz-linear-gradient(315deg,rgba(0,20,40,.95)0%,rgba(0,40,80,.95)100%);background:-o-linear-gradient(315deg,rgba(0,20,40,.95)0%,rgba(0,40,80,.95)100%);background:linear-gradient(135deg,rgba(0,20,40,.95)0%,rgba(0,40,80,.95)100%);border:2px solid#0ff;-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px;padding:24px;-webkit-box-shadow:0 0 20px rgba(0,255,255,.3),inset 0 0 20px rgba(0,255,255,.1);-moz-box-shadow:0 0 20px rgba(0,255,255,.3),inset 0 0 20px rgba(0,255,255,.1);box-shadow:0 0 20px rgba(0,255,255,.3),inset 0 0 20px rgba(0,255,255,.1);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);min-width:400px;-webkit-animation:glow 2s ease-in-out infinite alternate;-moz-animation:glow 2s ease-in-out infinite alternate;-o-animation:glow 2s ease-in-out infinite alternate;animation:glow 2s ease-in-out infinite alternate}@-webkit-keyframes glow{from{-webkit-box-shadow:0 0 20px rgba(0,255,255,.3),inset 0 0 20px rgba(0,255,255,.1);box-shadow:0 0 20px rgba(0,255,255,.3),inset 0 0 20px rgba(0,255,255,.1)}to{-webkit-box-shadow:0 0 30px rgba(0,255,255,.5),inset 0 0 30px rgba(0,255,255,.2);box-shadow:0 0 30px rgba(0,255,255,.5),inset 0 0 30px rgba(0,255,255,.2)}}@-moz-keyframes glow{from{-moz-box-shadow:0 0 20px rgba(0,255,255,.3),inset 0 0 20px rgba(0,255,255,.1);box-shadow:0 0 20px rgba(0,255,255,.3),inset 0 0 20px rgba(0,255,255,.1)}to{-moz-box-shadow:0 0 30px rgba(0,255,255,.5),inset 0 0 30px rgba(0,255,255,.2);box-shadow:0 0 30px rgba(0,255,255,.5),inset 0 0 30px rgba(0,255,255,.2)}}@-o-keyframes glow{from{box-shadow:0 0 20px rgba(0,255,255,.3),inset 0 0 20px rgba(0,255,255,.1)}to{box-shadow:0 0 30px rgba(0,255,255,.5),inset 0 0 30px rgba(0,255,255,.2)}}@keyframes glow{from{-webkit-box-shadow:0 0 20px rgba(0,255,255,.3),inset 0 0 20px rgba(0,255,255,.1);-moz-box-shadow:0 0 20px rgba(0,255,255,.3),inset 0 0 20px rgba(0,255,255,.1);box-shadow:0 0 20px rgba(0,255,255,.3),inset 0 0 20px rgba(0,255,255,.1)}to{-webkit-box-shadow:0 0 30px rgba(0,255,255,.5),inset 0 0 30px rgba(0,255,255,.2);-moz-box-shadow:0 0 30px rgba(0,255,255,.5),inset 0 0 30px rgba(0,255,255,.2);box-shadow:0 0 30px rgba(0,255,255,.5),inset 0 0 30px rgba(0,255,255,.2)}}@-webkit-keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}@-moz-keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}@-o-keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}@keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}.scifi-title.__jsx-style-dynamic-selector{color:#0ff;text-align:center;font-family:"Courier New",monospace;font-size:18px;font-weight:bold;margin-bottom:20px;text-shadow:0 0 10px rgba(0,255,255,.8);letter-spacing:2px}.scifi-input-group.__jsx-style-dynamic-selector{margin-bottom:16px}.scifi-label.__jsx-style-dynamic-selector{display:block;color:#66fcf1;font-family:"Courier New",monospace;font-size:12px;margin-bottom:6px;text-transform:uppercase;letter-spacing:1px}.scifi-input.__jsx-style-dynamic-selector{width:100%;background:rgba(0,20,40,.8);border:1px solid#0ff;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;padding:10px 12px;color:#66fcf1;font-family:"Courier New",monospace;font-size:14px;outline:none;-webkit-transition:all.3s ease;-moz-transition:all.3s ease;-o-transition:all.3s ease;transition:all.3s ease;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.scifi-input.__jsx-style-dynamic-selector:focus{border-color:#66fcf1;-webkit-box-shadow:0 0 10px rgba(102,252,241,.3);-moz-box-shadow:0 0 10px rgba(102,252,241,.3);box-shadow:0 0 10px rgba(102,252,241,.3)}.scifi-input.__jsx-style-dynamic-selector::-webkit-input-placeholder{color:rgba(102,252,241,.5)}.scifi-input.__jsx-style-dynamic-selector:-moz-placeholder{color:rgba(102,252,241,.5)}.scifi-input.__jsx-style-dynamic-selector::-moz-placeholder{color:rgba(102,252,241,.5)}.scifi-input.__jsx-style-dynamic-selector:-ms-input-placeholder{color:rgba(102,252,241,.5)}.scifi-input.__jsx-style-dynamic-selector::-ms-input-placeholder{color:rgba(102,252,241,.5)}.scifi-input.__jsx-style-dynamic-selector::placeholder{color:rgba(102,252,241,.5)}.scifi-button.__jsx-style-dynamic-selector{background:-webkit-linear-gradient(315deg,#0ff 0%,#0080ff 100%);background:-moz-linear-gradient(315deg,#0ff 0%,#0080ff 100%);background:-o-linear-gradient(315deg,#0ff 0%,#0080ff 100%);background:linear-gradient(135deg,#0ff 0%,#0080ff 100%);border:none;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;padding:10px 20px;color:#012;font-family:"Courier New",monospace;font-size:12px;font-weight:bold;text-transform:uppercase;letter-spacing:1px;cursor:pointer;-webkit-transition:all.3s ease;-moz-transition:all.3s ease;-o-transition:all.3s ease;transition:all.3s ease;width:100%;margin-bottom:8px}.scifi-button.__jsx-style-dynamic-selector:hover{background:-webkit-linear-gradient(315deg,#66fcf1 0%,#0af 100%);background:-moz-linear-gradient(315deg,#66fcf1 0%,#0af 100%);background:-o-linear-gradient(315deg,#66fcf1 0%,#0af 100%);background:linear-gradient(135deg,#66fcf1 0%,#0af 100%);-webkit-box-shadow:0 0 15px rgba(0,255,255,.5);-moz-box-shadow:0 0 15px rgba(0,255,255,.5);box-shadow:0 0 15px rgba(0,255,255,.5);-webkit-transform:translatey(-1px);-moz-transform:translatey(-1px);-ms-transform:translatey(-1px);-o-transform:translatey(-1px);transform:translatey(-1px)}.scifi-button.__jsx-style-dynamic-selector:active{-webkit-transform:translatey(0);-moz-transform:translatey(0);-ms-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0)}.scifi-file-input.__jsx-style-dynamic-selector{background:rgba(0,20,40,.8);border:1px dashed#0ff;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;padding:12px;color:#66fcf1;font-family:"Courier New",monospace;font-size:12px;cursor:pointer;-webkit-transition:all.3s ease;-moz-transition:all.3s ease;-o-transition:all.3s ease;transition:all.3s ease;text-align:center;position:relative;overflow:hidden}.scifi-file-input.__jsx-style-dynamic-selector:hover{border-color:#66fcf1;background:rgba(0,40,80,.8)}.scifi-file-input.__jsx-style-dynamic-selector input[type="file"].__jsx-style-dynamic-selector{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;cursor:pointer}.loader-panel.__jsx-style-dynamic-selector{position:absolute;top:20px;left:50%;-webkit-transform:translatex(-50%);-moz-transform:translatex(-50%);-ms-transform:translatex(-50%);-o-transform:translatex(-50%);transform:translatex(-50%);z-index:1000;background:rgba(0,20,40,.95);border:1px solid#0ff;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;padding:12px 20px;color:#66fcf1;font-family:"Courier New",monospace;font-size:14px;-webkit-box-shadow:0 0 15px rgba(0,255,255,.3);-moz-box-shadow:0 0 15px rgba(0,255,255,.3);box-shadow:0 0 15px rgba(0,255,255,.3)}.progress-bar.__jsx-style-dynamic-selector{width:100%;height:8px;background:rgba(0,20,40,.8);border:1px solid#0ff;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;margin-top:8px;overflow:hidden}.progress-fill.__jsx-style-dynamic-selector{height:100%;background:-webkit-linear-gradient(left,#0ff,#66fcf1);background:-moz-linear-gradient(left,#0ff,#66fcf1);background:-o-linear-gradient(left,#0ff,#66fcf1);background:linear-gradient(90deg,#0ff,#66fcf1);-webkit-transition:width.3s ease;-moz-transition:width.3s ease;-o-transition:width.3s ease;transition:width.3s ease}.status-panel.__jsx-style-dynamic-selector{position:absolute;top:10px;right:10px;z-index:1000;background:rgba(0,20,40,.95);border:1px solid#66fcf1;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;padding:12px;font-family:"Courier New",monospace;font-size:11px;max-width:200px;color:#66fcf1;-webkit-box-shadow:0 0 10px rgba(102,252,241,.2);-moz-box-shadow:0 0 10px rgba(102,252,241,.2);box-shadow:0 0 10px rgba(102,252,241,.2)}.status-title.__jsx-style-dynamic-selector{color:#0ff;font-weight:bold;margin-bottom:8px;text-transform:uppercase;letter-spacing:1px}.soldier-item.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:6px;margin-bottom:4px}.soldier-dot.__jsx-style-dynamic-selector{width:10px;height:10px;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;border:1px solid#0ff;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.out-of-bounds-indicator.__jsx-style-dynamic-selector{color:#f44;font-size:9px;font-weight:bold;margin-left:4px;-webkit-animation:pulse 1s ease-in-out infinite;-moz-animation:pulse 1s ease-in-out infinite;-o-animation:pulse 1s ease-in-out infinite;animation:pulse 1s ease-in-out infinite}.close-button.__jsx-style-dynamic-selector{position:absolute;top:8px;right:12px;background:none;border:none;color:#f44;font-size:20px;cursor:pointer;font-family:"Courier New",monospace;padding:0;width:24px;height:24px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-transition:all.3s ease;-moz-transition:all.3s ease;-o-transition:all.3s ease;transition:all.3s ease}.close-button.__jsx-style-dynamic-selector:hover{color:#f66;text-shadow:0 0 10px rgba(255,68,68,.8);-webkit-transform:scale(1.1);-moz-transform:scale(1.1);-ms-transform:scale(1.1);-o-transform:scale(1.1);transform:scale(1.1)}.toggle-controls.__jsx-style-dynamic-selector{position:absolute;bottom:20px;left:20px;z-index:1000;background:-webkit-linear-gradient(315deg,#0ff 0%,#0080ff 100%);background:-moz-linear-gradient(315deg,#0ff 0%,#0080ff 100%);background:-o-linear-gradient(315deg,#0ff 0%,#0080ff 100%);background:linear-gradient(135deg,#0ff 0%,#0080ff 100%);border:none;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;padding:12px;color:#012;font-size:16px;cursor:pointer;width:48px;height:48px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-shadow:0 0 15px rgba(0,255,255,.3);-moz-box-shadow:0 0 15px rgba(0,255,255,.3);box-shadow:0 0 15px rgba(0,255,255,.3);-webkit-transition:all.3s ease;-moz-transition:all.3s ease;-o-transition:all.3s ease;transition:all.3s ease}.toggle-controls.__jsx-style-dynamic-selector:hover{-webkit-transform:scale(1.1);-moz-transform:scale(1.1);-ms-transform:scale(1.1);-o-transform:scale(1.1);transform:scale(1.1);-webkit-box-shadow:0 0 20px rgba(0,255,255,.5);-moz-box-shadow:0 0 20px rgba(0,255,255,.5);box-shadow:0 0 20px rgba(0,255,255,.5)}.fullscreen-button.__jsx-style-dynamic-selector{position:absolute;top:70px;right:270px;z-index:1000;background:-webkit-linear-gradient(315deg,#ff9800 0%,#ff5722 100%);background:-moz-linear-gradient(315deg,#ff9800 0%,#ff5722 100%);background:-o-linear-gradient(315deg,#ff9800 0%,#ff5722 100%);background:linear-gradient(135deg,#ff9800 0%,#ff5722 100%);border:none;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;padding:12px;color:#fff;font-size:16px;cursor:pointer;width:48px;height:48px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-shadow:0 0 15px rgba(255,152,0,.3);-moz-box-shadow:0 0 15px rgba(255,152,0,.3);box-shadow:0 0 15px rgba(255,152,0,.3);-webkit-transition:all.3s ease;-moz-transition:all.3s ease;-o-transition:all.3s ease;transition:all.3s ease}.fullscreen-button.__jsx-style-dynamic-selector:hover{-webkit-transform:scale(1.1);-moz-transform:scale(1.1);-ms-transform:scale(1.1);-o-transform:scale(1.1);transform:scale(1.1);-webkit-box-shadow:0 0 20px rgba(255,152,0,.5);-moz-box-shadow:0 0 20px rgba(255,152,0,.5);box-shadow:0 0 20px rgba(255,152,0,.5)}.path-tracking-button.__jsx-style-dynamic-selector{position:absolute;bottom:80px;left:20px;z-index:1000;background:-webkit-linear-gradient(315deg,'.concat(R?"#4CAF50":"#f44336"," 0%,").concat(R?"#2E7D32":"#c62828"," 100%);background:-moz-linear-gradient(315deg,").concat(R?"#4CAF50":"#f44336"," 0%,").concat(R?"#2E7D32":"#c62828"," 100%);background:-o-linear-gradient(315deg,").concat(R?"#4CAF50":"#f44336"," 0%,").concat(R?"#2E7D32":"#c62828"," 100%);background:linear-gradient(135deg,").concat(R?"#4CAF50":"#f44336"," 0%,").concat(R?"#2E7D32":"#c62828"," 100%);border:none;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;padding:12px;color:#fff;font-size:16px;cursor:pointer;width:48px;height:48px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-shadow:0 0 15px ").concat(R?"rgba(76, 175, 80, 0.3)":"rgba(244, 67, 54, 0.3)",";-moz-box-shadow:0 0 15px ").concat(R?"rgba(76, 175, 80, 0.3)":"rgba(244, 67, 54, 0.3)",";box-shadow:0 0 15px ").concat(R?"rgba(76, 175, 80, 0.3)":"rgba(244, 67, 54, 0.3)",";-webkit-transition:all.3s ease;-moz-transition:all.3s ease;-o-transition:all.3s ease;transition:all.3s ease}.path-tracking-button.__jsx-style-dynamic-selector:hover{-webkit-transform:scale(1.1);-moz-transform:scale(1.1);-ms-transform:scale(1.1);-o-transform:scale(1.1);transform:scale(1.1);-webkit-box-shadow:0 0 20px ").concat(R?"rgba(76, 175, 80, 0.5)":"rgba(244, 67, 54, 0.5)",";-moz-box-shadow:0 0 20px ").concat(R?"rgba(76, 175, 80, 0.5)":"rgba(244, 67, 54, 0.5)",";box-shadow:0 0 20px ").concat(R?"rgba(76, 175, 80, 0.5)":"rgba(244, 67, 54, 0.5)",'}.map-container.__jsx-style-dynamic-selector:-webkit-full-screen{background:#000}.map-container.__jsx-style-dynamic-selector:-moz-full-screen{background:#000}.map-container.__jsx-style-dynamic-selector:-ms-fullscreen{background:#000}.map-container.__jsx-style-dynamic-selector:fullscreen{background:#000}.map-container.__jsx-style-dynamic-selector:-webkit-full-screen .fullscreen-button.__jsx-style-dynamic-selector{background:-webkit-linear-gradient(315deg,#4CAF50 0%,#2E7D32 100%);background:linear-gradient(135deg,#4CAF50 0%,#2E7D32 100%);-webkit-box-shadow:0 0 15px rgba(76,175,80,.3);box-shadow:0 0 15px rgba(76,175,80,.3)}.map-container.__jsx-style-dynamic-selector:-moz-full-screen .fullscreen-button.__jsx-style-dynamic-selector{background:-moz-linear-gradient(315deg,#4CAF50 0%,#2E7D32 100%);background:linear-gradient(135deg,#4CAF50 0%,#2E7D32 100%);-moz-box-shadow:0 0 15px rgba(76,175,80,.3);box-shadow:0 0 15px rgba(76,175,80,.3)}.map-container.__jsx-style-dynamic-selector:-ms-fullscreen .fullscreen-button.__jsx-style-dynamic-selector{background:linear-gradient(135deg,#4CAF50 0%,#2E7D32 100%);box-shadow:0 0 15px rgba(76,175,80,.3)}.map-container.__jsx-style-dynamic-selector:fullscreen .fullscreen-button.__jsx-style-dynamic-selector{background:-webkit-linear-gradient(315deg,#4CAF50 0%,#2E7D32 100%);background:-moz-linear-gradient(315deg,#4CAF50 0%,#2E7D32 100%);background:-o-linear-gradient(315deg,#4CAF50 0%,#2E7D32 100%);background:linear-gradient(135deg,#4CAF50 0%,#2E7D32 100%);-webkit-box-shadow:0 0 15px rgba(76,175,80,.3);-moz-box-shadow:0 0 15px rgba(76,175,80,.3);box-shadow:0 0 15px rgba(76,175,80,.3)}.map-container.__jsx-style-dynamic-selector:-webkit-full-screen .fullscreen-button.__jsx-style-dynamic-selector:hover{-webkit-box-shadow:0 0 20px rgba(76,175,80,.5);box-shadow:0 0 20px rgba(76,175,80,.5)}.map-container.__jsx-style-dynamic-selector:-moz-full-screen .fullscreen-button.__jsx-style-dynamic-selector:hover{-moz-box-shadow:0 0 20px rgba(76,175,80,.5);box-shadow:0 0 20px rgba(76,175,80,.5)}.map-container.__jsx-style-dynamic-selector:-ms-fullscreen .fullscreen-button.__jsx-style-dynamic-selector:hover{box-shadow:0 0 20px rgba(76,175,80,.5)}.map-container.__jsx-style-dynamic-selector:fullscreen .fullscreen-button.__jsx-style-dynamic-selector:hover{-webkit-box-shadow:0 0 20px rgba(76,175,80,.5);-moz-box-shadow:0 0 20px rgba(76,175,80,.5);box-shadow:0 0 20px rgba(76,175,80,.5)}.offline-indicator.__jsx-style-dynamic-selector{position:absolute;bottom:20px;right:20px;z-index:1000;background:rgba(0,20,40,.95);border:1px solid#0ff;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;padding:8px 12px;color:#0ff;font-family:"Courier New",monospace;font-size:10px;text-transform:uppercase;letter-spacing:1px;-webkit-box-shadow:0 0 10px rgba(0,255,255,.2);-moz-box-shadow:0 0 10px rgba(0,255,255,.2);box-shadow:0 0 10px rgba(0,255,255,.2)}.bounds-info.__jsx-style-dynamic-selector{position:absolute;bottom:140px;right:20px;z-index:1000;background:rgba(0,20,40,.95);border:1px solid#ff9800;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;padding:8px 12px;color:#ff9800;font-family:"Courier New",monospace;font-size:9px;max-width:200px;-webkit-box-shadow:0 0 10px rgba(255,152,0,.2);-moz-box-shadow:0 0 10px rgba(255,152,0,.2);box-shadow:0 0 10px rgba(255,152,0,.2)}.bounds-title.__jsx-style-dynamic-selector{color:#ff9800;font-weight:bold;margin-bottom:4px;text-transform:uppercase;letter-spacing:1px}.path-tracking-status.__jsx-style-dynamic-selector{position:absolute;bottom:140px;left:20px;z-index:1000;background:rgba(0,20,40,.95);border:1px solid ').concat(R?"#4CAF50":"#f44336",";-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;padding:8px 12px;color:").concat(R?"#4CAF50":"#f44336",';font-family:"Courier New",monospace;font-size:10px;text-transform:uppercase;letter-spacing:1px;-webkit-box-shadow:0 0 10px ').concat(R?"rgba(76, 175, 80, 0.2)":"rgba(244, 67, 54, 0.2)",";-moz-box-shadow:0 0 10px ").concat(R?"rgba(76, 175, 80, 0.2)":"rgba(244, 67, 54, 0.2)",";box-shadow:0 0 10px ").concat(R?"rgba(76, 175, 80, 0.2)":"rgba(244, 67, 54, 0.2)","}.out-of-bounds-marker.__jsx-style-dynamic-selector{-webkit-animation:flicker 1s ease-in-out infinite!important;-moz-animation:flicker 1s ease-in-out infinite!important;-o-animation:flicker 1s ease-in-out infinite!important;animation:flicker 1s ease-in-out infinite!important}@-webkit-keyframes flicker{0%,100%{opacity:1}50%{opacity:.3}}@-moz-keyframes flicker{0%,100%{opacity:1}50%{opacity:.3}}@-o-keyframes flicker{0%,100%{opacity:1}50%{opacity:.3}}@keyframes flicker{0%,100%{opacity:1}50%{opacity:.3}}")}),y&&(0,t.jsxs)("div",{className:n().dynamic([["82e4888967881265",[R?"#4CAF50":"#f44336",R?"#2E7D32":"#c62828",R?"rgba(76, 175, 80, 0.3)":"rgba(244, 67, 54, 0.3)",R?"rgba(76, 175, 80, 0.5)":"rgba(244, 67, 54, 0.5)",R?"#4CAF50":"#f44336",R?"#4CAF50":"#f44336",R?"rgba(76, 175, 80, 0.2)":"rgba(244, 67, 54, 0.2)"]]])+" loader-panel",children:[(0,t.jsx)("span",{style:{animation:y.includes("Error")?"none":"pulse 1.5s ease-in-out infinite"},className:n().dynamic([["82e4888967881265",[R?"#4CAF50":"#f44336",R?"#2E7D32":"#c62828",R?"rgba(76, 175, 80, 0.3)":"rgba(244, 67, 54, 0.3)",R?"rgba(76, 175, 80, 0.5)":"rgba(244, 67, 54, 0.5)",R?"#4CAF50":"#f44336",R?"#4CAF50":"#f44336",R?"rgba(76, 175, 80, 0.2)":"rgba(244, 67, 54, 0.2)"]]]),children:y}),k>0&&k<100&&(0,t.jsx)("div",{className:n().dynamic([["82e4888967881265",[R?"#4CAF50":"#f44336",R?"#2E7D32":"#c62828",R?"rgba(76, 175, 80, 0.3)":"rgba(244, 67, 54, 0.3)",R?"rgba(76, 175, 80, 0.5)":"rgba(244, 67, 54, 0.5)",R?"#4CAF50":"#f44336",R?"#4CAF50":"#f44336",R?"rgba(76, 175, 80, 0.2)":"rgba(244, 67, 54, 0.2)"]]])+" progress-bar",children:(0,t.jsx)("div",{style:{width:"".concat(k,"%")},className:n().dynamic([["82e4888967881265",[R?"#4CAF50":"#f44336",R?"#2E7D32":"#c62828",R?"rgba(76, 175, 80, 0.3)":"rgba(244, 67, 54, 0.3)",R?"rgba(76, 175, 80, 0.5)":"rgba(244, 67, 54, 0.5)",R?"#4CAF50":"#f44336",R?"#4CAF50":"#f44336",R?"rgba(76, 175, 80, 0.2)":"rgba(244, 67, 54, 0.2)"]]])+" progress-fill"})})]}),N&&!z&&(0,t.jsxs)("div",{className:n().dynamic([["82e4888967881265",[R?"#4CAF50":"#f44336",R?"#2E7D32":"#c62828",R?"rgba(76, 175, 80, 0.3)":"rgba(244, 67, 54, 0.3)",R?"rgba(76, 175, 80, 0.5)":"rgba(244, 67, 54, 0.5)",R?"#4CAF50":"#f44336",R?"#4CAF50":"#f44336",R?"rgba(76, 175, 80, 0.2)":"rgba(244, 67, 54, 0.2)"]]])+" scifi-panel",children:[(0,t.jsx)("button",{onClick:()=>M(!1),title:"Close Panel",className:n().dynamic([["82e4888967881265",[R?"#4CAF50":"#f44336",R?"#2E7D32":"#c62828",R?"rgba(76, 175, 80, 0.3)":"rgba(244, 67, 54, 0.3)",R?"rgba(76, 175, 80, 0.5)":"rgba(244, 67, 54, 0.5)",R?"#4CAF50":"#f44336",R?"#4CAF50":"#f44336",R?"rgba(76, 175, 80, 0.2)":"rgba(244, 67, 54, 0.2)"]]])+" close-button",children:"\xd7"}),(0,t.jsx)("div",{className:n().dynamic([["82e4888967881265",[R?"#4CAF50":"#f44336",R?"#2E7D32":"#c62828",R?"rgba(76, 175, 80, 0.3)":"rgba(244, 67, 54, 0.3)",R?"rgba(76, 175, 80, 0.5)":"rgba(244, 67, 54, 0.5)",R?"#4CAF50":"#f44336",R?"#4CAF50":"#f44336",R?"rgba(76, 175, 80, 0.2)":"rgba(244, 67, 54, 0.2)"]]])+" scifi-title",children:"SELECT MAP"}),(0,t.jsxs)("div",{className:n().dynamic([["82e4888967881265",[R?"#4CAF50":"#f44336",R?"#2E7D32":"#c62828",R?"rgba(76, 175, 80, 0.3)":"rgba(244, 67, 54, 0.3)",R?"rgba(76, 175, 80, 0.5)":"rgba(244, 67, 54, 0.5)",R?"#4CAF50":"#f44336",R?"#4CAF50":"#f44336",R?"rgba(76, 175, 80, 0.2)":"rgba(244, 67, 54, 0.2)"]]])+" scifi-input-group",children:[(0,t.jsx)("label",{className:n().dynamic([["82e4888967881265",[R?"#4CAF50":"#f44336",R?"#2E7D32":"#c62828",R?"rgba(76, 175, 80, 0.3)":"rgba(244, 67, 54, 0.3)",R?"rgba(76, 175, 80, 0.5)":"rgba(244, 67, 54, 0.5)",R?"#4CAF50":"#f44336",R?"#4CAF50":"#f44336",R?"rgba(76, 175, 80, 0.2)":"rgba(244, 67, 54, 0.2)"]]])+" scifi-label",children:"Map File Path"}),(0,t.jsx)("input",{id:"filepath",placeholder:"Enter path to .mbtiles file",className:n().dynamic([["82e4888967881265",[R?"#4CAF50":"#f44336",R?"#2E7D32":"#c62828",R?"rgba(76, 175, 80, 0.3)":"rgba(244, 67, 54, 0.3)",R?"rgba(76, 175, 80, 0.5)":"rgba(244, 67, 54, 0.5)",R?"#4CAF50":"#f44336",R?"#4CAF50":"#f44336",R?"rgba(76, 175, 80, 0.2)":"rgba(244, 67, 54, 0.2)"]]])+" scifi-input"})]}),(0,t.jsx)("button",{onClick:()=>{var e;let a=null==(e=document.getElementById("filepath"))?void 0:e.value;a&&p.current&&(console.log("Loading MBTiles from path:",a),p.current.loadMBTilesFromPath(a))},className:n().dynamic([["82e4888967881265",[R?"#4CAF50":"#f44336",R?"#2E7D32":"#c62828",R?"rgba(76, 175, 80, 0.3)":"rgba(244, 67, 54, 0.3)",R?"rgba(76, 175, 80, 0.5)":"rgba(244, 67, 54, 0.5)",R?"#4CAF50":"#f44336",R?"#4CAF50":"#f44336",R?"rgba(76, 175, 80, 0.2)":"rgba(244, 67, 54, 0.2)"]]])+" scifi-button",children:"Load From Path"}),(0,t.jsxs)("div",{className:n().dynamic([["82e4888967881265",[R?"#4CAF50":"#f44336",R?"#2E7D32":"#c62828",R?"rgba(76, 175, 80, 0.3)":"rgba(244, 67, 54, 0.3)",R?"rgba(76, 175, 80, 0.5)":"rgba(244, 67, 54, 0.5)",R?"#4CAF50":"#f44336",R?"#4CAF50":"#f44336",R?"rgba(76, 175, 80, 0.2)":"rgba(244, 67, 54, 0.2)"]]])+" scifi-input-group",children:[(0,t.jsx)("label",{className:n().dynamic([["82e4888967881265",[R?"#4CAF50":"#f44336",R?"#2E7D32":"#c62828",R?"rgba(76, 175, 80, 0.3)":"rgba(244, 67, 54, 0.3)",R?"rgba(76, 175, 80, 0.5)":"rgba(244, 67, 54, 0.5)",R?"#4CAF50":"#f44336",R?"#4CAF50":"#f44336",R?"rgba(76, 175, 80, 0.2)":"rgba(244, 67, 54, 0.2)"]]])+" scifi-label",children:"Upload Map File"}),(0,t.jsxs)("div",{className:n().dynamic([["82e4888967881265",[R?"#4CAF50":"#f44336",R?"#2E7D32":"#c62828",R?"rgba(76, 175, 80, 0.3)":"rgba(244, 67, 54, 0.3)",R?"rgba(76, 175, 80, 0.5)":"rgba(244, 67, 54, 0.5)",R?"#4CAF50":"#f44336",R?"#4CAF50":"#f44336",R?"rgba(76, 175, 80, 0.2)":"rgba(244, 67, 54, 0.2)"]]])+" scifi-file-input",children:[(0,t.jsx)("input",{type:"file",accept:".mbtiles",onChange:e=>{var a;let r=null==(a=e.target.files)?void 0:a[0];if(r&&p.current){console.log("Loading MBTiles from file:",r.name),w("Loading ".concat(r.name,"…")),C(0);let e=new FileReader;e.onprogress=e=>{if(e.lengthComputable){let a=Math.round(e.loaded/e.total*100);C(a),w("Loading ".concat(r.name,": ").concat(a,"%"))}else w("Loading ".concat(r.name,": ").concat(Math.round(e.loaded/1048576)," MB processed"))},e.onload=()=>p.current.loadMBTilesFromArrayBuffer(e.result),e.onerror=()=>{w("Error loading ".concat(r.name)),C(0)},e.readAsArrayBuffer(r)}},className:n().dynamic([["82e4888967881265",[R?"#4CAF50":"#f44336",R?"#2E7D32":"#c62828",R?"rgba(76, 175, 80, 0.3)":"rgba(244, 67, 54, 0.3)",R?"rgba(76, 175, 80, 0.5)":"rgba(244, 67, 54, 0.5)",R?"#4CAF50":"#f44336",R?"#4CAF50":"#f44336",R?"rgba(76, 175, 80, 0.2)":"rgba(244, 67, 54, 0.2)"]]])}),"Select .mbtiles file from device"]})]}),F&&(0,t.jsx)("button",{onClick:()=>{F&&o.current&&o.current.fitBounds(F,{maxZoom:18,padding:[20,20]})},className:n().dynamic([["82e4888967881265",[R?"#4CAF50":"#f44336",R?"#2E7D32":"#c62828",R?"rgba(76, 175, 80, 0.3)":"rgba(244, 67, 54, 0.3)",R?"rgba(76, 175, 80, 0.5)":"rgba(244, 67, 54, 0.5)",R?"#4CAF50":"#f44336",R?"#4CAF50":"#f44336",R?"rgba(76, 175, 80, 0.2)":"rgba(244, 67, 54, 0.2)"]]])+" scifi-button",children:"Fit to Map Bounds"}),(0,t.jsx)("button",{onClick:()=>{if(p.current&&p.current._db){let e=p.current._db,r=e.prepare("SELECT zoom_level, COUNT(*) as count FROM tiles GROUP BY zoom_level ORDER BY zoom_level");for(console.log("=== MBTiles Debug Info ==="),console.log("Tile distribution by zoom level:");r.step();){let e=r.getAsObject();console.log("  Zoom ".concat(e.zoom_level,": ").concat(e.count," tiles"))}r.free();let t=e.prepare("SELECT MIN(zoom_level) as min_zoom, MAX(zoom_level) as max_zoom FROM tiles");t.step();let n=t.getAsObject();t.free(),console.log("Zoom range: ".concat(n.min_zoom," - ").concat(n.max_zoom)),o.current&&(console.log("Current map zoom: ".concat(o.current.getZoom())),console.log("Map zoom limits: ".concat(o.current.getMinZoom()," - ").concat(o.current.getMaxZoom())),console.log("Current map bounds:",o.current.getBounds())),console.log("Current soldiers:",a.length),console.log("Trails data:",Object.keys(m).length,"soldiers have trails"),Object.entries(m).forEach(e=>{let[a,r]=e;console.log("Soldier ".concat(a,": ").concat(r.length," GPS points"))}),console.log("=== Distance Debug Info ===");let i=a.find(e=>e&&"1"===e.soldier_id&&e.gps&&"number"==typeof e.gps.latitude&&"number"==typeof e.gps.longitude);i&&(console.log("Command Center (Soldier 1): Lat ".concat(i.gps.latitude,", Lng ").concat(i.gps.longitude)),a.forEach(e=>{if(e&&e.soldier_id&&"string"==typeof e.soldier_id&&"1"!==e.soldier_id&&e.gps&&"number"==typeof e.gps.latitude&&"number"==typeof e.gps.longitude){let a=Y(i.gps.latitude,i.gps.longitude,e.gps.latitude,e.gps.longitude);console.log("Distance to Soldier ".concat(e.soldier_id,": ").concat(Math.round(a)," meters"))}})),console.log("=== Out of Bounds Debug Info ==="),console.log("Map metadata bounds:",O),console.log("Out of bounds soldiers:",Object.keys(D)),Object.entries(D).forEach(e=>{let[a,r]=e;console.log("Soldier ".concat(a," out of bounds: Lat ").concat(r.originalLat,", Lng ").concat(r.originalLng))}),console.log("=== Path Tracking Status ==="),console.log("Path tracking enabled:",R),console.log("Current trails in trailsRef:",Object.keys(g.current))}},className:n().dynamic([["82e4888967881265",[R?"#4CAF50":"#f44336",R?"#2E7D32":"#c62828",R?"rgba(76, 175, 80, 0.3)":"rgba(244, 67, 54, 0.3)",R?"rgba(76, 175, 80, 0.5)":"rgba(244, 67, 54, 0.5)",R?"#4CAF50":"#f44336",R?"#4CAF50":"#f44336",R?"rgba(76, 175, 80, 0.2)":"rgba(244, 67, 54, 0.2)"]]])+" scifi-button",children:"Debug Tiles"})]}),!N&&!z&&(0,t.jsx)("button",{onClick:()=>M(!0),title:"Open Map Controls",className:n().dynamic([["82e4888967881265",[R?"#4CAF50":"#f44336",R?"#2E7D32":"#c62828",R?"rgba(76, 175, 80, 0.3)":"rgba(244, 67, 54, 0.3)",R?"rgba(76, 175, 80, 0.5)":"rgba(244, 67, 54, 0.5)",R?"#4CAF50":"#f44336",R?"#4CAF50":"#f44336",R?"rgba(76, 175, 80, 0.2)":"rgba(244, 67, 54, 0.2)"]]])+" toggle-controls",children:"⚙"}),(0,t.jsx)("button",{onClick:()=>{let e=document.querySelector(".map-container");document.fullscreenElement?document.exitFullscreen().then(()=>{B(!1),setTimeout(()=>{o.current&&o.current.invalidateSize()},100)}).catch(e=>{console.error("Error attempting to exit fullscreen:",e)}):null==e||e.requestFullscreen().then(()=>{B(!0),setTimeout(()=>{o.current&&o.current.invalidateSize()},100)}).catch(e=>{console.error("Error attempting to enable fullscreen:",e)})},title:T?"Exit Fullscreen":"Enter Fullscreen",className:n().dynamic([["82e4888967881265",[R?"#4CAF50":"#f44336",R?"#2E7D32":"#c62828",R?"rgba(76, 175, 80, 0.3)":"rgba(244, 67, 54, 0.3)",R?"rgba(76, 175, 80, 0.5)":"rgba(244, 67, 54, 0.5)",R?"#4CAF50":"#f44336",R?"#4CAF50":"#f44336",R?"rgba(76, 175, 80, 0.2)":"rgba(244, 67, 54, 0.2)"]]])+" fullscreen-button",children:T?"⬜":"⛶"}),(0,t.jsx)("button",{onClick:()=>{U(e=>!e)},title:R?"Disable Path Tracking & Distance":"Enable Path Tracking & Distance",className:n().dynamic([["82e4888967881265",[R?"#4CAF50":"#f44336",R?"#2E7D32":"#c62828",R?"rgba(76, 175, 80, 0.3)":"rgba(244, 67, 54, 0.3)",R?"rgba(76, 175, 80, 0.5)":"rgba(244, 67, 54, 0.5)",R?"#4CAF50":"#f44336",R?"#4CAF50":"#f44336",R?"rgba(76, 175, 80, 0.2)":"rgba(244, 67, 54, 0.2)"]]])+" path-tracking-button",children:R?"\uD83D\uDEE4":"\uD83D\uDCCD"}),(0,t.jsxs)("div",{className:n().dynamic([["82e4888967881265",[R?"#4CAF50":"#f44336",R?"#2E7D32":"#c62828",R?"rgba(76, 175, 80, 0.3)":"rgba(244, 67, 54, 0.3)",R?"rgba(76, 175, 80, 0.5)":"rgba(244, 67, 54, 0.5)",R?"#4CAF50":"#f44336",R?"#4CAF50":"#f44336",R?"rgba(76, 175, 80, 0.2)":"rgba(244, 67, 54, 0.2)"]]])+" path-tracking-status",children:["Path Tracking: ",R?"ON":"OFF"]}),a.length>0&&(0,t.jsxs)("div",{className:n().dynamic([["82e4888967881265",[R?"#4CAF50":"#f44336",R?"#2E7D32":"#c62828",R?"rgba(76, 175, 80, 0.3)":"rgba(244, 67, 54, 0.3)",R?"rgba(76, 175, 80, 0.5)":"rgba(244, 67, 54, 0.5)",R?"#4CAF50":"#f44336",R?"#4CAF50":"#f44336",R?"rgba(76, 175, 80, 0.2)":"rgba(244, 67, 54, 0.2)"]]])+" status-panel",children:[(0,t.jsxs)("div",{className:n().dynamic([["82e4888967881265",[R?"#4CAF50":"#f44336",R?"#2E7D32":"#c62828",R?"rgba(76, 175, 80, 0.3)":"rgba(244, 67, 54, 0.3)",R?"rgba(76, 175, 80, 0.5)":"rgba(244, 67, 54, 0.5)",R?"#4CAF50":"#f44336",R?"#4CAF50":"#f44336",R?"rgba(76, 175, 80, 0.2)":"rgba(244, 67, 54, 0.2)"]]])+" status-title",children:["Active Units: ",a.length]}),Object.entries(h).map(e=>{var a;let[r,o]=e;return(0,t.jsxs)("div",{className:n().dynamic([["82e4888967881265",[R?"#4CAF50":"#f44336",R?"#2E7D32":"#c62828",R?"rgba(76, 175, 80, 0.3)":"rgba(244, 67, 54, 0.3)",R?"rgba(76, 175, 80, 0.5)":"rgba(244, 67, 54, 0.5)",R?"#4CAF50":"#f44336",R?"#4CAF50":"#f44336",R?"rgba(76, 175, 80, 0.2)":"rgba(244, 67, 54, 0.2)"]]])+" soldier-item",children:[(0,t.jsx)("div",{style:{backgroundColor:o,border:D[r]?"2px solid #ff0000":"1px solid #00ffff"},className:n().dynamic([["82e4888967881265",[R?"#4CAF50":"#f44336",R?"#2E7D32":"#c62828",R?"rgba(76, 175, 80, 0.3)":"rgba(244, 67, 54, 0.3)",R?"rgba(76, 175, 80, 0.5)":"rgba(244, 67, 54, 0.5)",R?"#4CAF50":"#f44336",R?"#4CAF50":"#f44336",R?"rgba(76, 175, 80, 0.2)":"rgba(244, 67, 54, 0.2)"]]])+" soldier-dot"}),(0,t.jsx)("span",{className:n().dynamic([["82e4888967881265",[R?"#4CAF50":"#f44336",R?"#2E7D32":"#c62828",R?"rgba(76, 175, 80, 0.3)":"rgba(244, 67, 54, 0.3)",R?"rgba(76, 175, 80, 0.5)":"rgba(244, 67, 54, 0.5)",R?"#4CAF50":"#f44336",R?"#4CAF50":"#f44336",R?"rgba(76, 175, 80, 0.2)":"rgba(244, 67, 54, 0.2)"]]]),children:r}),D[r]&&(0,t.jsx)("span",{className:n().dynamic([["82e4888967881265",[R?"#4CAF50":"#f44336",R?"#2E7D32":"#c62828",R?"rgba(76, 175, 80, 0.3)":"rgba(244, 67, 54, 0.3)",R?"rgba(76, 175, 80, 0.5)":"rgba(244, 67, 54, 0.5)",R?"#4CAF50":"#f44336",R?"#4CAF50":"#f44336",R?"rgba(76, 175, 80, 0.2)":"rgba(244, 67, 54, 0.2)"]]])+" out-of-bounds-indicator",children:"OUT"}),(0,t.jsxs)("span",{style:{color:"#888",fontSize:"10px"},className:n().dynamic([["82e4888967881265",[R?"#4CAF50":"#f44336",R?"#2E7D32":"#c62828",R?"rgba(76, 175, 80, 0.3)":"rgba(244, 67, 54, 0.3)",R?"rgba(76, 175, 80, 0.5)":"rgba(244, 67, 54, 0.5)",R?"#4CAF50":"#f44336",R?"#4CAF50":"#f44336",R?"rgba(76, 175, 80, 0.2)":"rgba(244, 67, 54, 0.2)"]]]),children:["(",(null==(a=m[r])?void 0:a.length)||0," pts)"]})]},r)})]}),O&&Object.keys(D).length>0&&(0,t.jsxs)("div",{className:n().dynamic([["82e4888967881265",[R?"#4CAF50":"#f44336",R?"#2E7D32":"#c62828",R?"rgba(76, 175, 80, 0.3)":"rgba(244, 67, 54, 0.3)",R?"rgba(76, 175, 80, 0.5)":"rgba(244, 67, 54, 0.5)",R?"#4CAF50":"#f44336",R?"#4CAF50":"#f44336",R?"rgba(76, 175, 80, 0.2)":"rgba(244, 67, 54, 0.2)"]]])+" bounds-info",children:[(0,t.jsx)("div",{className:n().dynamic([["82e4888967881265",[R?"#4CAF50":"#f44336",R?"#2E7D32":"#c62828",R?"rgba(76, 175, 80, 0.3)":"rgba(244, 67, 54, 0.3)",R?"rgba(76, 175, 80, 0.5)":"rgba(244, 67, 54, 0.5)",R?"#4CAF50":"#f44336",R?"#4CAF50":"#f44336",R?"rgba(76, 175, 80, 0.2)":"rgba(244, 67, 54, 0.2)"]]])+" bounds-title",children:"Map Bounds"}),(0,t.jsxs)("div",{className:n().dynamic([["82e4888967881265",[R?"#4CAF50":"#f44336",R?"#2E7D32":"#c62828",R?"rgba(76, 175, 80, 0.3)":"rgba(244, 67, 54, 0.3)",R?"rgba(76, 175, 80, 0.5)":"rgba(244, 67, 54, 0.5)",R?"#4CAF50":"#f44336",R?"#4CAF50":"#f44336",R?"rgba(76, 175, 80, 0.2)":"rgba(244, 67, 54, 0.2)"]]]),children:["N: ",O.north.toFixed(6)]}),(0,t.jsxs)("div",{className:n().dynamic([["82e4888967881265",[R?"#4CAF50":"#f44336",R?"#2E7D32":"#c62828",R?"rgba(76, 175, 80, 0.3)":"rgba(244, 67, 54, 0.3)",R?"rgba(76, 175, 80, 0.5)":"rgba(244, 67, 54, 0.5)",R?"#4CAF50":"#f44336",R?"#4CAF50":"#f44336",R?"rgba(76, 175, 80, 0.2)":"rgba(244, 67, 54, 0.2)"]]]),children:["S: ",O.south.toFixed(6)]}),(0,t.jsxs)("div",{className:n().dynamic([["82e4888967881265",[R?"#4CAF50":"#f44336",R?"#2E7D32":"#c62828",R?"rgba(76, 175, 80, 0.3)":"rgba(244, 67, 54, 0.3)",R?"rgba(76, 175, 80, 0.5)":"rgba(244, 67, 54, 0.5)",R?"#4CAF50":"#f44336",R?"#4CAF50":"#f44336",R?"rgba(76, 175, 80, 0.2)":"rgba(244, 67, 54, 0.2)"]]]),children:["E: ",O.east.toFixed(6)]}),(0,t.jsxs)("div",{className:n().dynamic([["82e4888967881265",[R?"#4CAF50":"#f44336",R?"#2E7D32":"#c62828",R?"rgba(76, 175, 80, 0.3)":"rgba(244, 67, 54, 0.3)",R?"rgba(76, 175, 80, 0.5)":"rgba(244, 67, 54, 0.5)",R?"#4CAF50":"#f44336",R?"#4CAF50":"#f44336",R?"rgba(76, 175, 80, 0.2)":"rgba(244, 67, 54, 0.2)"]]]),children:["W: ",O.west.toFixed(6)]}),(0,t.jsxs)("div",{style:{color:"#ff4444",marginTop:"4px",fontWeight:"bold"},className:n().dynamic([["82e4888967881265",[R?"#4CAF50":"#f44336",R?"#2E7D32":"#c62828",R?"rgba(76, 175, 80, 0.3)":"rgba(244, 67, 54, 0.3)",R?"rgba(76, 175, 80, 0.5)":"rgba(244, 67, 54, 0.5)",R?"#4CAF50":"#f44336",R?"#4CAF50":"#f44336",R?"rgba(76, 175, 80, 0.2)":"rgba(244, 67, 54, 0.2)"]]]),children:[Object.keys(D).length," OUT OF BOUNDS"]})]}),(0,t.jsx)("div",{id:"mapid",style:{height:"100%",width:"100%",border:"1px solid #66fcf1",borderRadius:8,background:"#0a0a0a"},className:n().dynamic([["82e4888967881265",[R?"#4CAF50":"#f44336",R?"#2E7D32":"#c62828",R?"rgba(76, 175, 80, 0.3)":"rgba(244, 67, 54, 0.3)",R?"rgba(76, 175, 80, 0.5)":"rgba(244, 67, 54, 0.5)",R?"#4CAF50":"#f44336",R?"#4CAF50":"#f44336",R?"rgba(76, 175, 80, 0.2)":"rgba(244, 67, 54, 0.2)"]]])})]})}}}]);